{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const searchQuery = ref(\"\");\n    const queryTimeout = ref(null);\n    const mapboxSearchResults = ref(null);\n    const searchError = ref(null);\n    const router = useRouter();\n    const previewCity = searchResult => {\n      const [city, state] = searchResult.title.split(\" \");\n    };\n    const getSearchResults = async () => {\n      clearTimeout(queryTimeout.value);\n      queryTimeout.value = setTimeout(async () => {\n        if (searchQuery.value !== \"\") {\n          try {\n            const result = await axios.get(`http://localhost:3000/book?page=${searchQuery.value}`);\n            mapboxSearchResults.value = result.data.docs;\n          } catch {\n            searchError.value = true;\n          }\n          return;\n        }\n        mapboxSearchResults.value = null;\n      }, 300);\n    };\n    const __returned__ = {\n      searchQuery,\n      queryTimeout,\n      mapboxSearchResults,\n      searchError,\n      router,\n      previewCity,\n      getSearchResults,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","useRouter","searchQuery","queryTimeout","mapboxSearchResults","searchError","router","previewCity","searchResult","city","state","title","split","getSearchResults","clearTimeout","value","setTimeout","result","get","data","docs"],"sources":["C:/Users/Nitro/Desktop/MEVN-STACK/Vue/weatherapp/src/views/HomeView.vue"],"sourcesContent":["<template>\r\n  <main class=\"container text-white\">\r\n    <div class=\"pt-4 mb-8 relative\">\r\n      <input\r\n        type=\"text\"\r\n        v-model=\"searchQuery\"\r\n        @input=\"getSearchResults\"\r\n        placeholder=\"Search for a city for state\"\r\n        class=\"py-2 px-1 w-full bg-transparent border-b focus:border-weather-secondary focus:outline-none focus:shadow-[0px_1;x_0_0_#004E71]\"\r\n      />\r\n      <ul\r\n        v-if=\"mapboxSearchResults\"\r\n        class=\"absolute bg-weather-secondary text-white w-full shadow-md py-2 px-1 top-[66px]\"\r\n      >\r\n        <p v-if=\"searchError\">Sorry something went wrong. Try again later</p>\r\n        <p v-if=\"!searchError && mapboxSearchResults.length === 0\">\r\n          No result match your query, try a different term.\r\n        </p>\r\n        <template v-else>\r\n          <li\r\n            v-for=\"searchResult in mapboxSearchResults\"\r\n            @click=\"previewCity(searchResult)\"\r\n            :key=\"searchResult.id\"\r\n            class=\"py-2 cursor-pointer\"\r\n          >\r\n            {{ searchResult.title }}\r\n          </li>\r\n        </template>\r\n      </ul>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport {useRouter} from \"vue-router\";\r\n\r\nconst searchQuery = ref(\"\");\r\nconst queryTimeout = ref(null);\r\nconst mapboxSearchResults = ref(null);\r\nconst searchError = ref(null);\r\nconst router = useRouter()\r\n\r\nconst previewCity = (searchResult) =>{\r\n  const [city, state] = searchResult.title.split(\" \")\r\n  \r\n}\r\n\r\nconst getSearchResults = async () => {\r\n  clearTimeout(queryTimeout.value);\r\n  queryTimeout.value = setTimeout(async () => {\r\n    if (searchQuery.value !== \"\") {\r\n      try {\r\n        const result = await axios.get(\r\n          `http://localhost:3000/book?page=${searchQuery.value}`\r\n        );\r\n        mapboxSearchResults.value = result.data.docs;\r\n      } catch {\r\n        searchError.value = true;\r\n      }\r\n      return;\r\n    }\r\n    mapboxSearchResults.value = null;\r\n  }, 300);\r\n};\r\n</script>"],"mappings":"AAkCA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,SAAS,QAAO,YAAY;;;;;;;IAEpC,MAAMC,WAAW,GAAGH,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMI,YAAY,GAAGJ,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMK,mBAAmB,GAAGL,GAAG,CAAC,IAAI,CAAC;IACrC,MAAMM,WAAW,GAAGN,GAAG,CAAC,IAAI,CAAC;IAC7B,MAAMO,MAAM,GAAGL,SAAS,CAAC,CAAC;IAE1B,MAAMM,WAAW,GAAIC,YAAY,IAAI;MACnC,MAAM,CAACC,IAAI,EAAEC,KAAK,CAAC,GAAGF,YAAY,CAACG,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC;IAErD,CAAC;IAED,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnCC,YAAY,CAACX,YAAY,CAACY,KAAK,CAAC;MAChCZ,YAAY,CAACY,KAAK,GAAGC,UAAU,CAAC,YAAY;QAC1C,IAAId,WAAW,CAACa,KAAK,KAAK,EAAE,EAAE;UAC5B,IAAI;YACF,MAAME,MAAM,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAC5B,mCAAmChB,WAAW,CAACa,KAAK,EACtD,CAAC;YACDX,mBAAmB,CAACW,KAAK,GAAGE,MAAM,CAACE,IAAI,CAACC,IAAI;UAC9C,CAAC,CAAC,MAAM;YACNf,WAAW,CAACU,KAAK,GAAG,IAAI;UAC1B;UACA;QACF;QACAX,mBAAmB,CAACW,KAAK,GAAG,IAAI;MAClC,CAAC,EAAE,GAAG,CAAC;IACT,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}